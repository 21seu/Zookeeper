# Zookeeper

> Zookeeper是一个分布式协调服务的开源框架。主要用来解决分布式集群中应用系统的一致性问题，例如怎样避免同时操作同一数据造成脏读的问题。分布式系统中数据存在一致性的问题。

## 1.Zookeeper简介



### 1.1 Zookeeper是什么？



- Zookeeper本质上是一个分布式的小文件存储系统。提供基于类似于文件系统的目录树方式的数据存储，并且可以对树中的节点进行有效管理。
- Zookeeper提供给客户端监控存储在zk内部数据的功能，从而可以达到基于数据的集群管理。诸如：统一命名服务（dubbo）、分布式配置管理（solr的配置集中管理）、分布式消息队列（sub/pub）、分布式锁、分布式协调等功能。



### 1.2 Zookeeper的架构组成

![image.png](https://cdn.nlark.com/yuque/0/2021/png/12759906/1622562408679-5e8a96bb-118e-4de6-b6e3-c47f6730a911.png)

**Leader****（核心组件，事务请求的唯一处理者；不是用户手动执行，而是选举出来的）**

- Zk集群工作的核心角色
- 集群内部各个服务器的调度者
- 事务请求（写操作）的唯一调度和处理者，保证集群事务处理的顺序性；对于create，setData，delete等有写操作的请求，则要统一转发给leader处理，leader需要决定编号、执行操作，这个过程称为一个事务。



**Follower（处理读请求，转发事务请求到Leader；参与Leader的选举）**

- 处理客户端非事物（读操作）请求
- 转发事务请求给Leader
- 参与集群Leader选举投票2n-1台可以做集群投票

此外，针对访问量比较大的zk集群，还可以新增观察者就角色。
